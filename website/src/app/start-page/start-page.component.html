<div class="container">

    <div class="page-header">
        <h1>Documentation<small>&nbsp;&nbsp;generated by <strong>
                <a href="https://github.com/darekf77/ng2-rest">ng2-rest</a>
            </strong> angular 2 lib.</small></h1>
        <br>
        <h2 id="title"> <span>{{msg}}</span> </h2>

        <br>
        

        <div class="list-group" *ngIf="selected && selected.length > 0" >
            <a href="#" class="list-group-item" *ngFor="let ex of selected" >
                <h4 class="list-group-item-heading"> {{cuttedUrl(ex)}}</h4>
                <!--<p class="list-group-item-text">Content goes here</p>-->
            </a>
            
            <button type="button" class="btn btn-default" (click)="downloadAll()" >download all</button>
            
        </div>
        

    </div>
    

    <table class="table table-hover">
        <thead *ngIf="groups && groups.length > 0">
            <tr>
                <th>URL</th>
                <th class="name">NAME</th>
            </tr>
        </thead>
        <tbody *ngIf="!groups || groups.length === 0">
            <tr>
                <td>
                    Nothing generated
                </td>
            </tr>
        </tbody>
        <tbody *ngFor="let group of groups">
            <tr> <strong>  {{group.name}} </strong> </tr>
            <tr *ngFor="let file of group.files" (click)="selectFile(file, $event)" [ngClass]="{'activated': (activeFile && activeFile === file) }">
                <td class="url method">{{cuttedUrl(file)}}</td>
                <td class="name">{{file.name}}</td>
                <div class="description" (click)="$event.stopPropagation()" *ngIf="activeFile && activeFile === file">

                    <div class="container">
                        <div>
                            {{activeFile.description}}
                            <br>
                            <br>
                            <br>
                            <div class="list-group">                                

                                <span class="list-group-item" *ngFor="let ex of file.examples">
                                        <h4 class="list-group-item-heading" (click)="openExample(ex)"  >
                                            <span class="http-method-{{ex.method}} http-method" >{{ex.method}}</span>&nbsp;{{ex.usecase}}
                                            <span style="margin-right: 10px;" class="glyphicon glyphicon-menu-down pull-left" *ngIf="!ex.isOpen">
                                                    </span>
                                            <span style="margin-right: 10px;" class="glyphicon glyphicon-menu-up pull-left" *ngIf="ex.isOpen">
                                            </span>
                                            
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox"  [(ngModel)]="ex.isSelected"  (click)="$event.stopPropagation()"  >
                                                </label>
                                            </div>
                                            
                                        </h4>
                                        <hr *ngIf="ex.isOpen">


                                        <tabset  type="pills" class="common-tabs"   *ngIf="ex.isOpen" >
                                            <tab heading="Usecase">
                                                
                                                <p *ngIf="ex.isOpen && ex.urlFull" class="list-group-item-text">
                                                    <strong>Full request url:</strong> {{ex.urlFull}} <br>
                                                </p>
                                                <p *ngIf="ex.isOpen && ex.urlParams" class="list-group-item-text">
                                                    <strong>Url params: </strong> <code>{{ex.urlParams}}</code> <br>
                                                </p>
                                                <p *ngIf="ex.isOpen && ex.bodySend" class="list-group-item-text">
                                                    Request body: <br>
                                                    <code>
                                                                {{ex.bodySend}}
                                                            </code>
                                                </p>
                                                <p *ngIf="ex.isOpen && ex.bodyRecieve" class="list-group-item-text">
                                                    Received data: <br>
                                                    <code>
                                                                {{ex.bodyRecieve}}
                                                            </code>
                                                </p>
                                                
                                            </tab>
                                            <tab heading="Contract">
                                                
                                                <pre *ngIf="ex.isOpen && ex.contract"  >
                                                    <code highlight 
                                                    class="groovy"> {{removeReturn(ex.contract)}} </code>
                                                </pre>
                                                
                                                <span  *ngIf="ex.isOpen && !ex.contract" class="label label-danger">
                                                    No generated contract for usecase
                                                </span>
                                                
                                            </tab>
                                        </tabset>

                                        
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </tr>
        </tbody>
    </table>

</div>
