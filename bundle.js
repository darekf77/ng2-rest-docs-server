!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function n(e){return new Buffer(e.username+":"+e.password).toString("base64")}function o(e){void 0===e&&(e=""),S.Helpers.deleteFolderRecursive(b),u.mkdirSync(b),u.mkdirSync(x),u.mkdirSync(R),u.mkdirSync(E),u.mkdirSync(F);var r={url:"http://jira.eniro.com",token:"ZGFmaTUxOkphYmxvbmthMTc=",models:[]};u.writeFileSync(w,JSON.stringify(r),"utf8"),u.writeFileSync(j,e,"utf8"),S.Helpers.copyFolderRecursiveSync(O,b),P.length=0,q.length=0,console.log(y.yellow("Docs folder recreated ("+b+")"))}function i(e,t,i,S,O){void 0===e&&(e=3333),void 0===t&&(t="http://localhost:3000"),void 0===i&&(i=!1),void 0===S&&(S=void 0),void 0===O&&(O=void 0),t&&console.log(y.green("Base URL form angular2 app: "+t)),u.existsSync(b)&&!i||o();try{q=JSON.parse(u.readFileSync(N,"utf8").toString())}catch(e){q.length=0}var j=c();j.use(p()),j.use(g()),j.use(h.urlencoded({extended:!0})),j.use(h.json()),j.use("/",c.static(b)),j.get("/api/start",function(e,r){o(),console.log("started"),r.status(200).send()}),j.get("/api/start/:msg",function(e,r){o(e.params.msg),console.log("started, with message"),r.status(200).send()}),j.get("/api/cross/get/:website/:path",function(e,r){var t=decodeURIComponent(e.params.website),n=decodeURIComponent(e.params.path);console.log("websiteUrl",t),console.log("websitePath",n);var o=e.headers.authorization;console.log("authorizaiton",o);var i={hostname:t,path:n,method:"GET",port:443,headers:{"Content-Type":"application/json",Authorization:e.headers.authorization}};m.getJSON(i,function(e,t){console.log("onResult: ("+e+")"+JSON.stringify(t)),r.statusCode=e,r.send(t)})}),j.post("/api/config/jira",function(e,r){var t=n(O),o=e.headers.authorization;if(console.log("auth",o),o==="Basic "+t){var i=e.body;console.log("newConfig",JSON.stringify(i)),u.writeFileSync(w,JSON.stringify(i),"utf8"),r.status(200).send(JSON.stringify(i))}else console.log("bad authoriation"),r.sendStatus(400)}),j.post("/api/downloadall",function(e,r){if(console.log("req.body",e.body),e.body&&e.body instanceof Array&&e.body.length>0){var t=new d,n=(new Date).getTime(),o=E+"/contracts-"+n;u.mkdirSync(o),e.body.forEach(function(e){console.log("file",e),u.writeFileSync(o+"/"+l.basename(e),u.readFileSync(e,"utf8"),"utf8")}),t.zipFolder(o,function(){t.writeToFile(o+".zip"),r.status(200).send("json/contracts/zip/contracts-"+n+".zip")})}else r.status(400)}),j.post("/api/save",function(e,n){var o=e.body;if(!o)return console.log(y.gray("no body in request")),void n.status(400).send();if(a(o,t),s(o))n.status(400).send();else{var i=x+"/"+r.filePrefix+q.length+".json";o.fileName=i,u.writeFileSync(i,JSON.stringify(o),"utf8"),q.push(o),P=v.genereateDocsGroups(q);var c=[];P.forEach(function(e){e.files.forEach(function(e){var r=0;e.examples.forEach(function(t){var n=R+"/"+e.name+"-"+f(t.usecase)+r++ +".groovy";t.contractPath=n,u.writeFileSync(n,t.contract,"utf8")})}),u.writeFileSync(J(e),JSON.stringify(e),"utf8"),c.push(e.name)}),u.writeFileSync(C,JSON.stringify(c),"utf8"),n.status(200).send(JSON.stringify(o))}}),j.listen(e,function(){console.log(y.green("Server is working on http://localhost:"+e))})}function s(e){var r=q.filter(function(r){return r.urlFull===e.urlFull&&r.method===e.method&&r.usecase===e.usecase&&r.bodyRecieve===e.bodyRecieve&&r.bodySend===e.bodySend&&r.group===e.group});return r.length>0}function a(e,r){e.url&&""!==e.url.trim()||(e.url="<< undefined url >>"),e.usecase&&""!==e.usecase.trim()||(e.usecase="<< undefined usecase >>"),e.description&&""!==e.description.trim()||(e.description="<< undefined description >>"),e.group&&""!==e.group.trim()||(e.group="<< undefined group >>"),e.name&&""!==e.name.trim()||(e.name="<< undefined name >>"),e.baseURLDocsServer&&""!==e.baseURLDocsServer.trim()||(e.baseURLDocsServer=r)}var c=t(1),u=t(2),f=t(3),l=t(4),p=t(5),d=t(6).EasyZip,g=t(7),h=t(8),y=t(9),v=t(10),m=t(24),S=t(28),O=__dirname+"/website/dist",b=process.cwd()+"/docs",x=b+"/json",N=x+"/requests.json",j=x+"/msg.txt",F=x+"/jira",w=x+"/jira/config.json",R=x+"/contracts",E=x+"/contracts/zip",C=x+"/groups.json",J=function(e){var r=e.name.trim().replace(/\s/g,"").toUpperCase();return x+"/group-"+r+".json"};r.getToken=n,r.filePrefix="url";var P=[],q=[];r.run=i},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("md5")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("method-override")},function(e,r){e.exports=require("easy-zip")},function(e,r){e.exports=require("cors")},function(e,r){e.exports=require("body-parser")},function(e,r){e.exports=require("chalk")},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(11))},function(e,r,t){"use strict";function n(e){console.log("files",e);var r=o.groupFiles(e);return r.forEach(function(e){return e.files=i.mergeExamples(e.files)}),r.forEach(function(e){e.files.forEach(function(e){e.examples.forEach(function(e){e.contract=s.getContract(e)})})}),r}var o=t(12),i=t(13),s=t(14);r.genereateDocsGroups=n},function(e,r){"use strict";function t(e){var r=[];return e.forEach(function(t){void 0===t.group&&(t.group="-- undefined --"),console.log(t.group);var n=r.filter(function(e){return e.name===t.group});0===n.length&&r.push({name:t.group,files:JSON.parse(JSON.stringify(e.filter(function(e){return e.group===t.group})))})}),r}r.groupFiles=t},function(e,r){"use strict";function t(e){var r=[];return e.forEach(function(e){var t=r.filter(function(r){return r.url===e.url});if(0===t.length){var n=JSON.parse(JSON.stringify(e));n.examples=[],n.examples.push(JSON.parse(JSON.stringify(e))),r.push(n)}else console.log("aaa",t),t[0].examples.push(JSON.parse(JSON.stringify(e)))}),r}r.mergeExamples=t},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(15))},function(e,r,t){"use strict";function n(e){var r={};r.requestBody=i.bodyTransform(e.bodySend,e.form),r.responseBody=i.bodyTransform(e.bodyRecieve),r.headers=i.transformHeaders(e.headers),r.queryParams=i.transformQueryPrams(e.urlParams),r.method=e.method,r.status=e.status,r.url=e.url.replace(e.baseURLDocsServer,"");var t=o(r);return t}function o(e){var r=e.queryParams&&""!==e.queryParams.trim()?"urlPath('"+e.url+"') {\n                "+e.queryParams+"                \n            }":"url '"+e.url+"'\n";return"\npackage contracts\n\norg.springframework.cloud.contract.spec.Contract.make {\n    request {\n        "+r+"\n        method "+e.method+"\n        "+e.requestBody+"\n    }\n    response {\n        status: '"+e.status+"'\n        "+e.responseBody+"\n    }\n    "+e.headers+"\n}\n    \n    "}var i=t(16);r.getContract=n},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(17)),n(t(20)),n(t(23))},function(e,r,t){"use strict";function n(e){if(void 0===e)return"";var r=[];if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.error("string withou object in transformQueryPrams"),""}if(e instanceof Array&&e.length>0){var t=e;t.forEach(function(e){for(var t in e)if("regex"!==t){var n=e[t];"object"==typeof n&&(n=JSON.stringify(n));var s=void 0!==e.regex?e.regex:o.regexForAllCharacters();r.push("\t\t\tparameter '"+t+"' : \n\t\t\tvalue("+i.CONSUMER+"(matching('"+s+"')),\n\t\t\tproducer('"+n+"')\n\t\t)\n");break}})}else for(var n in e){var s=e[n];"object"==typeof s&&(s=JSON.stringify(s)),r.push("\t\t\tparameter '"+n+"' : \n\t\t\tvalue("+i.CONSUMER+"(matching('"+o.regexForAllCharacters()+"')),\n\t\t\tproducer('"+s+"')\n\t\t)\n")}if(0===r.length)return"";if(1===r.length)return"queryParameters {\n"+r[0]+"}";if(2===r.length)return"queryParameters {\n"+r[0]+"\n"+r[1]+"}";var a=r.join("");return"queryParameters {\n"+a+"\n\t\t}"}var o=t(18),i=t(19);r.transformQueryPrams=n},function(e,r){"use strict";function t(e){return e.trim().replace(/\s/g,"")}function n(e){var r=e.trim().replace(/ /g,"$$$"),t=r.replace(/(\t|\n)/g,"");return console.log("RES",t),t.replace(/\$/g," ")}function o(e){return".{"+e+"}"}function i(){return".+"}r.clean=t,r.change=n,r.regexFromLength=o,r.regexForAllCharacters=i},function(e,r){"use strict";r.WITHOUT_FORM_LENGTH_INDICATOR=255,r.PRODUCER="producer",r.CONSUMER="consumer"},function(e,r,t){"use strict";function n(e,r){console.log("bindings",r);try{e=JSON.parse(e)}catch(e){return console.error("string withou object in bodyTransform"),""}if(e instanceof Array){var t=e;if(0===t.length)return"[[ ]]";e=t[0]}r&&r.length>0&&r.forEach(function(r){r.temp=c.PathObject.get(r.path,e)}),a(e),r&&r.length>0&&r.forEach(function(r){if(null!==r.length){var t=r.path,n=r.temp,o=n?f.CONSUMER+"('"+n+"'),":"",i="\t\t\t\t"+c.PathObject.fieldName(t)+":  \n                    \t\t\t$(\n                        \t\t\t\t"+o+" "+f.PRODUCER+"(regex('"+u.regexFromLength(r.length)+"')) \n                    \t\t\t)\n";c.PathObject.set(t,i,e)}}),s(e);var n=[];for(var o in e)n.push(e[o]);return"body(\n\t\t"+n.join()+"\n\t\t)\n"}function o(e){for(var r in e)if(e[r]instanceof Object)return!0;return!1}function i(e){var r=[];for(var t in e){var n=e[t];r.push(n)}if(0===r.length)return"[]";if(1===r.length)return r[0];if(2===r.length)return r[0]+",\n"+r[1];var o=r.join(",");return o}function s(e){for(var r in e){var t=e[r];if(t instanceof Array){var n=t;if(n.length>0){var a=n[0];o(a)?s(a):e[r]=r+": [[\n\n                    \t\t"+i(a)+"\n\n                ]]\n"}else e[r]=r+": [[]]"}else t instanceof Object&&(o(t)?s(t):e[r]=r+": []")}}function a(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void console.log("canno prepareSimpleTypes ")}for(var r in e){var t=e[r];if(t instanceof Array){var n=t;n.length>0&&(e[r]=n.slice(0,1),a(e[r][0]))}else t instanceof Object?a(t):e[r]="\n\t\t"+r+": $(\n                \t"+f.CONSUMER+"('"+e[r]+"'),\n                \t"+f.PRODUCER+"(regex('"+u.regexForAllCharacters()+"'))\n            \t) "}return e}var c=t(21),u=t(18),f=t(19);r.bodyTransform=n,r.checkIfContainsArrayOrObjecct=o,r.bodySimpelObjet=i,r.prepareArraysAndObjects=s,r.prepareSimpleTypes=a},function(e,r,t){"use strict";var n=t(22),o=function(){function e(){}return e.get=function(e,r){return n.get(r,e)},e.set=function(e,r,t){return n.set(t,e,r)},e.parent=function(e){var r=e.split(".");if(1!==r.length||r[0]!==e){r.pop();var t=r.join(".");return t}},e.fieldName=function(e){var r=e.split(".");return r[r.length-1]},e}();r.PathObject=o},function(e,r){e.exports=require("lodash")},function(e,r){"use strict";function t(e){if(!e)return"";var r=[];for(var t in e){var n=e[t];r.push("\t\theader '"+t+"' : '"+n+"'")}if(0===r.length)return"";if(1===r.length)return"headers {\n"+r[0]+"}";if(2===r.length)return"headers {\n"+r[0]+",\n"+r[1]+"\n\t\t}";var o=r.join(",\n");return"headers {\n"+o+"\n\t\t}"}r.transformHeaders=t},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(t(25))},function(e,r,t){"use strict";function n(e,r){console.log("rest::getJSON");var t=443==e.port?i:o,n=t.request(e,function(t){var n="";console.log(e.host+":"+t.statusCode),t.setEncoding("utf8"),t.listenerCount("data")>0&&t.removeAllListeners("data"),t.on("data",function(e){n+=e}),t.listenerCount("end")>0&&t.removeAllListeners("end"),t.on("end",function(){var e=JSON.parse(n);r(t.statusCode,e)})});n.listenerCount("error")>0&&n.removeAllListeners("error"),n.on("error",function(e){}),n.end()}var o=t(26),i=t(27);r.getJSON=n},function(e,r){e.exports=require("http")},function(e,r){e.exports=require("https")},function(e,r,t){"use strict";var n=t(2),o=t(4),i=function(){function e(){}return e.deleteFolderRecursive=function(r){n.existsSync(r)&&(n.readdirSync(r).forEach(function(t,o){var i=r+"/"+t;n.lstatSync(i).isDirectory()?e.deleteFolderRecursive(i):n.unlinkSync(i)}),n.rmdirSync(r))},e.copyFileSync=function(e,r){var t=r;n.existsSync(r)&&n.lstatSync(r).isDirectory()&&(t=o.join(r,o.basename(e))),n.writeFileSync(t,n.readFileSync(e))},e.copyFolderRecursiveSync=function(r,t){var i=[],s=t;n.existsSync(s)||n.mkdirSync(s),n.lstatSync(r).isDirectory()&&(i=n.readdirSync(r),i.forEach(function(t){var i=o.join(r,t);n.lstatSync(i).isDirectory()?e.copyFolderRecursiveSync(i,s):e.copyFileSync(i,s)}))},e}();r.Helpers=i}]));